/**
 * Librairie du system desing des Bibliothèques de l'Université de Montréal
 * @module @bibudem/ui
 * @version 0.2.1
 * @author Christian Rémillard <christian.remillard@umontreal.ca>
 * @license ISC
 * @see https://github.com/bibudem/ui
 */
var t=Object.defineProperty,e=(e,s,r)=>(((e,s,r)=>{s in e?t(e,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[s]=r})(e,"symbol"!=typeof s?s+"":s,r),r);Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const s=require("./lit-element-B9Hck3Na.cjs"),r=Symbol();
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */class i{get taskComplete(){return this._taskComplete||(1===this.status?this._taskComplete=new Promise(((t,e)=>{this._resolveTaskComplete=t,this._rejectTaskComplete=e})):3===this.status?this._taskComplete=Promise.reject(this._error):this._taskComplete=Promise.resolve(this._value)),this._taskComplete}constructor(t,e,s){this._callId=0,this.status=0,(this._host=t).addController(this);const r="object"==typeof e?e:{task:e,args:s};this._task=r.task,this._argsFn=r.args,this._argsEqual=r.argsEqual??o,this._onComplete=r.onComplete,this._onError=r.onError,this.autoRun=r.autoRun??!0,"initialValue"in r&&(this._value=r.initialValue,this.status=2,this._previousArgs=this._getArgs?.())}hostUpdate(){!0===this.autoRun&&this._performTask()}hostUpdated(){"afterUpdate"===this.autoRun&&this._performTask()}_getArgs(){if(void 0===this._argsFn)return;const t=this._argsFn();if(!Array.isArray(t))throw new Error("The args function must return an array");return t}async _performTask(){const t=this._getArgs(),e=this._previousArgs;this._previousArgs=t,t===e||void 0===t||void 0!==e&&this._argsEqual(e,t)||await this.run(t)}async run(t){let e,s;t??=this._getArgs(),this._previousArgs=t,1===this.status?this._abortController?.abort():(this._taskComplete=void 0,this._resolveTaskComplete=void 0,this._rejectTaskComplete=void 0),this.status=1,"afterUpdate"===this.autoRun?queueMicrotask((()=>this._host.requestUpdate())):this._host.requestUpdate();const i=++this._callId;this._abortController=new AbortController;let o=!1;try{e=await this._task(t,{signal:this._abortController.signal})}catch(n){o=!0,s=n}if(this._callId===i){if(e===r)this.status=0;else{if(!1===o){try{this._onComplete?.(e)}catch{}this.status=2,this._resolveTaskComplete?.(e)}else{try{this._onError?.(s)}catch{}this.status=3,this._rejectTaskComplete?.(s)}this._value=e,this._error=s}this._host.requestUpdate()}}abort(t){1===this.status&&this._abortController?.abort(t)}get value(){return this._value}get error(){return this._error}render(t){switch(this.status){case 0:return t.initial?.();case 1:return t.pending?.();case 2:return t.complete?.(this.value);case 3:return t.error?.(this.error);default:throw new Error(`Unexpected status: ${this.status}`)}}}const o=(t,e)=>t===e||t.length===e.length&&t.every(((t,r)=>!s.notEqual(t,e[r])));class n{constructor(t){}get _$isConnected(){return this._$parent._$isConnected}_$initialize(t,e,s){this.__part=t,this._$parent=e,this.__attributeIndex=s}_$resolve(t,e){return this.update(t,e)}update(t,e){return this.render(...e)}}
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */class a extends n{constructor(t){if(super(t),this._value=s.nothing,2!==t.type)throw new Error(`${this.constructor.directiveName}() can only be used in child bindings`)}render(t){if(t===s.nothing||null==t)return this._templateResult=void 0,this._value=t;if(t===s.noChange)return t;if("string"!=typeof t)throw new Error(`${this.constructor.directiveName}() called with a non-string value`);if(t===this._value)return this._templateResult;this._value=t;const e=[t];return e.raw=e,this._templateResult={_$litType$:this.constructor.resultType,strings:e,values:[]}}}a.directiveName="unsafeHTML",a.resultType=1;const l=(h=a,(...t)=>({_$litDirective$:h,values:t}));var h;const c=':host,*{box-sizing:border-box}:host{display:block;font-size:var(--bib-avis-size, var(--md-sys-typescale-title-medium-size, inherit));background:var(--bib-avis-container-color, var(--md-sys-color-warningContainer, #fffac6))}:host([hidden]){display:none}.inner{display:flex;align-items:center;max-width:1220px;margin:0 auto;padding:11px 19px;gap:1em}.message{flex-grow:1;min-height:24px}.btn-close{display:inline-flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;box-sizing:border-box;-webkit-tap-highlight-color:transparent;background-color:transparent;outline:0px;border:0px;margin:0;cursor:pointer;user-select:none;vertical-align:middle;appearance:none;text-decoration:none;text-align:center;flex:0 0 auto;font-size:1.5rem;font-size:36px;font-weight:700;line-height:1;position:relative;padding:0;border-radius:50%;overflow:visible;color:var(--bib-btn-close-color, rgba(0, 0, 0, .4));transition:color .15s cubic-bezier(.4,0,.2,1),background-color .15s cubic-bezier(.4,0,.2,1)}.btn-close:after{content:"";position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);min-height:44px;min-width:44px;width:100%;height:100%}.btn-close:focus:not([disabled]),.btn-close:focus-visible{outline:2px solid #bde4ff;outline-offset:3px}.btn-close:focus:not(:focus-visible){outline:0}.btn-close:hover{color:var(--bib-btn-close-hover-color, rgba(0, 0, 0, .8))}.btn-close:hover:after{background-color:#0000000a}.btn-close:after{width:calc(100% + 16px);height:calc(100% + 16px);border-radius:50%;background-color:transparent;transition:background-color .15s cubic-bezier(.4,0,.2,1) 0ms}.btn-close>svg{fill:currentColor}';console.log("bibAvisStyles: ",c);class u extends s.LitElement{constructor(){super(),e(this,"_avisTask",new i(this,{task:async([t,e,s],{signal:r})=>{const i=new URL(`${e}/${s}`,t),o=await fetch(i,{headers:{Accept:"application/json"},signal:r});if(!o.ok)throw new Error(reaponse.status);return o.json()},args:()=>[this.service,this.contexte,this.niveau]})),this.service="https://avis.bib.umontreal.ca",this.contexte="site-web-dev",this.niveau="important",this.boutonFermer=!1}_onBtnFermerClick(){alert("Fonction à venir!")}_renderBoutonFermer(){return this.boutonFermer?s.html`<button class="btn-close" aria-label="Fermer" @click="${this._onBtnFermerClick}">${l('<svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24"><path d="M480-424 284-228q-11 11-28 11t-28-11q-11-11-11-28t11-28l196-196-196-196q-11-11-11-28t11-28q11-11 28-11t28 11l196 196 196-196q11-11 28-11t28 11q11 11 11 28t-11 28L536-480l196 196q11 11 11 28t-11 28q-11 11-28 11t-28-11L480-424Z"/></svg>')}</button>`:null}_renderAvis(t){return t?s.html`<aside class="container"><div class="inner"><div class="message">${l(t)}</div>${this._renderBoutonFermer()}</div></aside>`:null}_renderRemote(){return this._avisTask.render({pending:()=>s.html``,complete:t=>this._renderAvis(t.message),error:t=>(console.log(t),null)})}_renderLocal(){return this._renderAvis("<slot />")}render(){return""===this.textContent.trim()?this._renderRemote():this._renderLocal()}}e(u,"properties",{service:{type:String},contexte:{type:String,default:"site-web"},niveau:{type:String},boutonFermer:{type:Boolean,attribute:"bouton-fermer"}}),e(u,"styles",[s.css`${s.unsafeCSS(c)}`,s.css``]),customElements.define("bib-avis",u),exports.BibAvis=u;
//# sourceMappingURL=bib-avis.cjs.map
